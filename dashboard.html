<h2>User Dashboard</h2>
<p id="msg"></p>

<div>
  ğŸ¥ˆ Silver: <span id="silver"></span><br>
  ğŸ¥‡ Gold: <span id="gold"></span><br>
  ğŸ’ Diamond: <span id="diamond"></span>
</div>

<button onclick="logout()">Logout</button>

<script type="module">
import { onAuthStateChanged, signOut } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDoc, doc } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { auth, db } from "./firebase.js";

onAuthStateChanged(auth, async user=>{
  if(!user) return location.href="index.html";
  const u = await getDoc(doc(db,"Users",user.uid));
  const d = u.data();

  if(d.role==="admin") return location.href="admin.html";

  silver.innerText=d.silver;
  gold.innerText=d.gold;
  diamond.innerText=d.diamond;

  const notice = await getDoc(doc(db,"OwnerMessages","latest"));
  if(notice.exists()) msg.innerText="ğŸ“¢ "+notice.data().message;
});

window.logout=()=>signOut(auth);
</script>